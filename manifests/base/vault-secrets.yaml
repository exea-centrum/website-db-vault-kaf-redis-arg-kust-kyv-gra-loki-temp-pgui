apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-init
  namespace: davtrowebdbvault
data:
  init-vault.sh: |
    #!/bin/bash
    sleep 10
    export VAULT_ADDR="http://vault:8200"
    export VAULT_TOKEN="root"
    
    # Enable KV secrets engine
    vault secrets enable -path=secret kv-v2
    
    # Create database secrets
    vault kv put secret/database/postgres       postgres-user="webuser"       postgres-password="testpassword"       postgres-db="webdb"       postgres-host="postgres-db"
    
    # Create Redis secrets
    vault kv put secret/redis       redis-password=""
    
    # Create Kafka secrets  
    vault kv put secret/kafka       kafka-brokers="kafka:9092"
    
    echo "Vault initialization completed"
